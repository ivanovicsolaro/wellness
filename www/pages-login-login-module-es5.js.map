{"version":3,"sources":["webpack:///src/app/pages/login/login.page.html","webpack:///src/app/pages/login/login-routing.module.ts","webpack:///src/app/pages/login/login.module.ts","webpack:///src/app/pages/login/login.page.scss","webpack:///src/app/pages/login/login.page.ts"],"names":["routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","Storage","LoginPage","menuCtrl","alertCtrl","formBuilder","globalSrv","navCtrl","router","apiSrv","initForm","enable","loginForm","valid","message","validateForm","create","header","buttons","alert","present","showLoading","value","email","username","password","console","log","login","toPromise","loginResponse","error","hideLoading","set","key","token","JSON","stringify","user","setDirection","navigate","fields","Object","keys","controls","forEach","control","invalid","group","required","selector","template"],"mappings":"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","file":"pages-login-login-module-es5.js","sourcesContent":["export default \"<ion-content fullscreen=\\\"true\\\">\\n  <div class=\\\"background\\\">\\n    <img class=\\\"logo-image\\\" src=\\\"assets/logo.png\\\" alt=\\\"Wellness\\\">\\n    <div class=\\\"title\\\">\\n      SERVICIOS PROFESIONALES DE BIENESTAR\\n    </div>\\n    <div class=\\\"grid-container\\\">\\n      <form [formGroup]=\\\"loginForm\\\" (submit)=\\\"login()\\\">\\n        <ion-grid>\\n          <ion-row>\\n            <ion-col size=\\\"10\\\" offset=\\\"1\\\">\\n              <ion-item>\\n                <!-- <ion-label position=\\\"fixed\\\">Usuario</ion-label> -->\\n                <ion-input type=\\\"text\\\" placeholder=\\\"Usuario\\\" formControlName=\\\"username\\\" clearInput></ion-input>\\n              </ion-item>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"10\\\" offset=\\\"1\\\">\\n              <ion-item>\\n                <!-- <ion-label position=\\\"fixed\\\">Contraseña</ion-label> -->\\n                <ion-input type=\\\"password\\\" placeholder=\\\"Contraseña\\\" formControlName=\\\"password\\\" clearInput></ion-input>\\n              </ion-item>\\n            </ion-col>\\n          </ion-row>\\n          <ion-row>\\n            <ion-col size=\\\"10\\\" offset=\\\"1\\\">\\n              <ion-button type=\\\"submit\\\" expand=\\\"block\\\" color=\\\"success\\\">INGRESAR</ion-button>\\n            </ion-col>\\n            <ion-col size=\\\"10\\\" offset=\\\"1\\\">\\n              <ion-button expand=\\\"block\\\" color=\\\"wellness\\\" routerLink=\\\"/create-account\\\" routerDirection=\\\"forward\\\">CREAR CUENTA</ion-button>\\n            </ion-col>\\n          </ion-row>\\n        </ion-grid>\\n      </form>\\n    </div>\\n  </div>\\n</ion-content>\\n<app-footer-login></app-footer-login>\\n<!-- <ion-footer>\\n  <ion-toolbar color=\\\"wellness\\\" class=\\\"ion-text-center\\\">\\n    <a style=\\\"color: white;\\\">¿Necesitas ayuda para ingresar?</a>\\n  </ion-toolbar>\\n</ion-footer> -->\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\nimport { FooterLoginModule } from 'src/app/components/footer-login/footer-login.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    FooterLoginModule\n  ],\n  declarations: [LoginPage]\n})\n\nexport class LoginPageModule {}\n","export default \"ion-toolbar.header {\\n  --background: transparent;\\n  --ion-color-base: transparent !important;\\n}\\n\\n.background {\\n  background-image: url('background-min.jpg');\\n  height: 100%;\\n  width: 100%;\\n  background-repeat: no-repeat;\\n  background-size: cover;\\n  background-position: center;\\n}\\n\\nimg.logo-image {\\n  max-width: 50%;\\n}\\n\\ndiv.title {\\n  background: #346699;\\n  color: white;\\n  text-align: center;\\n  font-size: 1.1em;\\n  font-weight: bold;\\n  text-transform: uppercase;\\n  padding: 15px;\\n}\\n\\ndiv.grid-container {\\n  position: absolute;\\n  width: 100%;\\n  bottom: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUUseUJBQUE7RUFDQSx3Q0FBQTtBQUFGOztBQUVBO0VBQ0UsMkNBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLDRCQUFBO0VBQ0Esc0JBQUE7RUFDQSwyQkFBQTtBQUNGOztBQUNBO0VBQ0UsY0FBQTtBQUVGOztBQUFBO0VBQ0UsbUJBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxhQUFBO0FBR0Y7O0FBREE7RUFDRSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0FBSUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tdG9vbGJhci5oZWFkZXIge1xuICAvLyAtLWJhY2tncm91bmQ6IHJlZDtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgLS1pb24tY29sb3ItYmFzZTogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcbn1cbi5iYWNrZ3JvdW5kIHtcbiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uLy4uL2Fzc2V0cy9sb2dpbi9iYWNrZ3JvdW5kLW1pbi5qcGcpO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG59XG5pbWcubG9nby1pbWFnZSB7XG4gIG1heC13aWR0aDogNTAlO1xufVxuZGl2LnRpdGxle1xuICBiYWNrZ3JvdW5kOiAjMzQ2Njk5O1xuICBjb2xvcjogd2hpdGU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxLjFlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIHBhZGRpbmc6IDE1cHg7XG59XG5kaXYuZ3JpZC1jb250YWluZXJ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvdHRvbTogMTAlO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AlertController, MenuController, NavController } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api/api.service';\nimport { GlobalService } from 'src/app/services/global/global.service';\n\nimport { Plugins } from '@capacitor/core';\nimport { Router } from '@angular/router';\nconst { Storage } = Plugins;\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\n\nexport class LoginPage implements OnInit {\n\n  loginForm: FormGroup;\n\n  constructor(private menuCtrl: MenuController,\n              private alertCtrl: AlertController,\n              private formBuilder: FormBuilder,\n              private globalSrv: GlobalService,\n              private navCtrl: NavController,\n              private router: Router,\n              private apiSrv: ApiService) { \n    this.initForm();\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.menuCtrl.enable(false);\n  }\n\n  /**\n   * Logs an user in the app\n   */\n  async login() {\n    if (!this.loginForm.valid) {\n      let message = this.validateForm();\n      // console.log(message);\n      const alert = await this.alertCtrl.create({\n        header: 'Error',\n        message,\n        buttons: ['Aceptar']\n      });\n      return await alert.present();\n    }\n    this.globalSrv.showLoading();\n    let value = {\n      email: this.loginForm.value.username,\n      password: this.loginForm.value.password\n    }\n    console.log(value);\n    let loginResponse;\n    try {\n      loginResponse = await this.apiSrv.login(value).toPromise();\n    }catch(e) {\n      console.error(e);\n      loginResponse = null;\n    }\n    if (!loginResponse) {\n      this.globalSrv.hideLoading();\n      const alert = await this.alertCtrl.create({\n        header: 'Error',\n        message: 'Error iniciando sesión',\n        buttons: ['Aceptar']\n      });\n      return await alert.present();\n      return;\n    }\n    await Storage.set({\n      key: 'token',\n      value: loginResponse.token\n    });\n    await Storage.set({\n      key: 'user',\n      value: JSON.stringify(loginResponse.user)\n    });\n    this.menuCtrl.enable(true);\n    this.globalSrv.hideLoading();\n    this.navCtrl.setDirection('root');\n    this.router.navigate(['/']);\n  }\n\n  /**\n   * Validate login form\n   */\n  private validateForm() {\n    let message = '';\n    let fields = {\n      username: 'Usuario',\n      password: 'Contraseña'\n    };\n    Object.keys(this.loginForm.controls).forEach(control => {\n      if (this.loginForm.controls[control].invalid) {\n        message += `<p>Campo ${fields[control]} es requerido.</p>`;\n      }\n    });\n    return message;\n  }\n\n  /**\n   * Init login form\n   */\n  private initForm() {\n    this.loginForm = this.formBuilder.group({\n      username: [null, Validators.required],\n      password: [null, Validators.required]\n    });\n  }\n}\n"]}